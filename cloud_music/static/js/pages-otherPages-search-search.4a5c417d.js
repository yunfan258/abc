(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-otherPages-search-search"],{"00ff":function(t,n,r){"use strict";r("d3b7"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e="http://viababy.top:3000",a=function(t){return new Promise((function(n,r){uni.request({url:e+t.url,method:t.method||"get",data:t.data||{},header:t.header||{"content-type":"application/json"},xhrFields:{withCredentials:!0},success:n,fail:r})}))},i=a;n.default=i},"1da1":function(t,n,r){"use strict";function e(t,n,r,e,a,i,o){try{var s=t[i](o),u=s.value}catch(c){return void r(c)}s.done?n(u):Promise.resolve(u).then(e,a)}function a(t){return function(){var n=this,r=arguments;return new Promise((function(a,i){var o=t.apply(n,r);function s(t){e(o,a,i,s,u,"next",t)}function u(t){e(o,a,i,s,u,"throw",t)}s(void 0)}))}}r("d3b7"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=a},"51f4":function(t,n,r){"use strict";r.r(n);var e=r("9721"),a=r("8e03");for(var i in a)"default"!==i&&function(t){r.d(n,t,(function(){return a[t]}))}(i);r("ac05");var o,s=r("f0c5"),u=Object(s["a"])(a["default"],e["b"],e["c"],!1,null,"67ee636c",null,!1,e["a"],o);n["default"]=u.exports},8403:function(t,n,r){var e=r("aeb1");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var a=r("4f06").default;a("6194a0ec",e,!0,{sourceMap:!1,shadowMode:!1})},"8e03":function(t,n,r){"use strict";r.r(n);var e=r("d83e"),a=r.n(e);for(var i in e)"default"!==i&&function(t){r.d(n,t,(function(){return e[t]}))}(i);n["default"]=a.a},"96cf":function(t,n){!function(n){"use strict";var r,e=Object.prototype,a=e.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",c="object"===typeof t,l=n.regeneratorRuntime;if(l)c&&(t.exports=l);else{l=n.regeneratorRuntime=c?t.exports:{},l.wrap=_;var f="suspendedStart",d="suspendedYield",h="executing",v="completed",p={},g={};g[o]=function(){return this};var y=Object.getPrototypeOf,m=y&&y(y(D([])));m&&m!==e&&a.call(m,o)&&(g=m);var w=k.prototype=b.prototype=Object.create(g);S.prototype=w.constructor=k,k.constructor=S,k[u]=S.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var n="function"===typeof t&&t.constructor;return!!n&&(n===S||"GeneratorFunction"===(n.displayName||n.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(w),t},l.awrap=function(t){return{__await:t}},E(L.prototype),L.prototype[s]=function(){return this},l.AsyncIterator=L,l.async=function(t,n,r,e){var a=new L(_(t,n,r,e));return l.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),w[u]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},l.keys=function(t){var n=[];for(var r in t)n.push(r);return n.reverse(),function r(){while(n.length){var e=n.pop();if(e in t)return r.value=e,r.done=!1,r}return r.done=!0,r}},l.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0],n=t.completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function e(e,a){return s.type="throw",s.arg=t,n.next=e,a&&(n.method="next",n.arg=r),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(t,n){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc<=this.prev&&a.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var i=e;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=n,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),p},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===t){var e=r.completion;if("throw"===e.type){var a=e.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:D(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=r),p}}}function _(t,n,r,e){var a=n&&n.prototype instanceof b?n:b,i=Object.create(a.prototype),o=new T(e||[]);return i._invoke=P(t,r,o),i}function x(t,n,r){try{return{type:"normal",arg:t.call(n,r)}}catch(e){return{type:"throw",arg:e}}}function b(){}function S(){}function k(){}function E(t){["next","throw","return"].forEach((function(n){t[n]=function(t){return this._invoke(n,t)}}))}function L(t){function n(r,e,i,o){var s=x(t[r],t,e);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"===typeof c&&a.call(c,"__await")?Promise.resolve(c.__await).then((function(t){n("next",t,i,o)}),(function(t){n("throw",t,i,o)})):Promise.resolve(c).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,o)}))}o(s.arg)}var r;function e(t,e){function a(){return new Promise((function(r,a){n(t,e,r,a)}))}return r=r?r.then(a,a):a()}this._invoke=e}function P(t,n,r){var e=f;return function(a,i){if(e===h)throw new Error("Generator is already running");if(e===v){if("throw"===a)throw i;return H()}r.method=a,r.arg=i;while(1){var o=r.delegate;if(o){var s=j(o,r);if(s){if(s===p)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(e===f)throw e=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);e=h;var u=x(t,n,r);if("normal"===u.type){if(e=r.done?v:d,u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(e=v,r.method="throw",r.arg=u.arg)}}}function j(t,n){var e=t.iterator[n.method];if(e===r){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=r,j(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var a=x(e,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=r),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function C(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function O(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function D(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var e=-1,i=function n(){while(++e<t.length)if(a.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=r,n.done=!0,n};return i.next=i}}return{next:H}}function H(){return{value:r,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},9721:function(t,n,r){"use strict";r.d(n,"b",(function(){return a})),r.d(n,"c",(function(){return i})),r.d(n,"a",(function(){return e}));var e={uniSearchBar:r("c941").default},a=function(){var t=this,n=t.$createElement,r=t._self._c||n;return r("v-uni-view",[r("uni-search-bar",{attrs:{focus:!0},on:{confirm:function(n){arguments[0]=n=t.$handleEvent(n),t.search.apply(void 0,arguments)},input:function(n){arguments[0]=n=t.$handleEvent(n),t.onChange.apply(void 0,arguments)}},model:{value:t.value,callback:function(n){t.value=n},expression:"value"}}),""===t.value?r("v-uni-view",[r("v-uni-view",{staticClass:"title history__title"},[r("v-uni-text",[t._v("历史记录")]),r("v-uni-text",{staticClass:"iconfont icon-delete",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.deleteHistory.apply(void 0,arguments)}}})],1),r("v-uni-view",{staticClass:"history"},t._l(t.history,(function(n,e){return r("v-uni-view",{key:n.id,staticClass:"history__item",attrs:{"data-index":e},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.findHistory.apply(void 0,arguments)}}},[r("v-uni-text",[t._v(t._s(n.name))])],1)})),1)],1):t._e(),""!==t.value?r("v-uni-view",[t.songs.length>0?r("v-uni-view",{staticClass:"title"},[t._v("歌曲")]):t._e(),t._l(t.songs,(function(n,e){return r("v-uni-view",{key:n.id,staticClass:"songs",attrs:{"data-id":n.id,"data-name":n.name},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.handleSong.apply(void 0,arguments)}}},[r("v-uni-text",{staticClass:"iconfont icon-search1"}),r("v-uni-text",[t._v(t._s(n.name))]),r("v-uni-text",{staticClass:"songs__artists"},[t._v("("+t._s(n.artists[0].name)+")")])],1)})),t.artists.length>0?r("v-uni-view",{staticClass:"title"},[t._v("歌手")]):t._e(),t._l(t.artists,(function(n,e){return r("v-uni-view",{key:n.id,staticClass:"artists",attrs:{"data-id":n.id,"data-name":n.name},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.handleArtist.apply(void 0,arguments)}}},[r("v-uni-text",{staticClass:"iconfont icon-search1"}),r("v-uni-text",[t._v(t._s(n.name))])],1)})),t.playlists.length>0?r("v-uni-view",{staticClass:"title"},[t._v("歌单")]):t._e(),t._l(t.playlists,(function(n,e){return r("v-uni-view",{key:n.id,staticClass:"playlists",attrs:{"data-id":n.id,"data-name":n.name},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.handlePlaylist.apply(void 0,arguments)}}},[r("v-uni-text",{staticClass:"iconfont icon-search1"}),r("v-uni-text",[t._v(t._s(n.name))])],1)}))],2):t._e()],1)},i=[]},ac05:function(t,n,r){"use strict";var e=r("8403"),a=r.n(e);a.a},aeb1:function(t,n,r){var e=r("24fb");n=e(!1),n.push([t.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* pages/otherPages/search/search.wxss */.title[data-v-67ee636c]{padding:%?20?% %?40?% 0;color:#d43c43}.history[data-v-67ee636c]{display:flex;flex-wrap:wrap;margin:%?20?%}.history__title[data-v-67ee636c]{display:flex;justify-content:space-between}.history__item[data-v-67ee636c]{background-color:#f1f1f1;font-size:%?30?%;border-radius:%?20?%;padding:0 %?5?%;\r\n    /* width: 160rpx; */height:%?60?%;line-height:%?60?%;margin:%?20?%}.songs[data-v-67ee636c],\r\n.artists[data-v-67ee636c],\r\n.playlists[data-v-67ee636c]{margin:0 %?40?%;padding:%?20?% 0;border-bottom:%?2?% #e1e1e1 solid;\r\n    /* display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 1; */overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.icon-search1[data-v-67ee636c]{margin-right:%?20?%;font-size:%?30?%;color:#999}.songs__artists[data-v-67ee636c]{color:#999;font-size:%?30?%}",""]),t.exports=n},c6b1:function(t,n,r){"use strict";var e=r("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e(r("00ff")),i=function(){return(0,a.default)({url:"/search/hot/detail"})},o=function(t){var n=uni.getStorageSync("cookie");return(0,a.default)({url:"/playlist/detail",data:{cookie:n,id:t}})},s=function(t){return(0,a.default)({url:"/song/detail",data:{ids:t}})},u=function(t){return(0,a.default)({url:"/song/url",data:{id:t}})},c=function(t){return(0,a.default)({url:"/lyric",data:{id:t}})},l={data:function(){return{}},_getHotDetail:i,_getPlaylistDetail:o,_getSongDetail:s,_getSongUrl:u,_getLyric:c};n.default=l},d83e:function(t,n,r){"use strict";var e=r("4ea4");r("d81d"),r("a434"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,r("96cf");var a=e(r("1da1")),i=e(r("eaa8")),o=e(r("c6b1")),s=i.default._getSearch,u=i.default._getSearchSuggest,c=o.default._getSongDetail,l={data:function(){return{value:"",songs:[],artists:[],playlists:[],history:[]}},onShow:function(){this.setData({history:uni.getStorageSync("history")})},onShareAppMessage:function(){},methods:{_getSearch:function(t){return(0,a.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,s(t);case 2:n.sent;case 3:case"end":return n.stop()}}),n)})))()},_getSearchSuggest:function(t){var n=this;return(0,a.default)(regeneratorRuntime.mark((function r(){var e,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u(t);case 2:o=r.sent,n.setData({songs:(null===(e=o.data.result)||void 0===e?void 0:e.songs)||[],artists:(null===(a=o.data.result)||void 0===a?void 0:a.artists)||[],playlists:(null===(i=o.data.result)||void 0===i?void 0:i.playlists)||[]});case 4:case"end":return r.stop()}}),r)})))()},_getSongDetail:function(t){return(0,a.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,c(t);case 2:n.sent;case 3:case"end":return n.stop()}}),n)})))()},onChange:function(t){this._getSearchSuggest(this.value)},findHistory:function(t){var n=t.currentTarget.dataset.index,r=this.history,e=r[n].tag,a=r[n].id;"song"===e&&uni.navigateTo({url:"/pages/otherPages/player/player?id=".concat(a)}),"artist"===e&&uni.navigateTo({url:"/pages/otherPages/album/album?id=".concat(a)}),"playlist"===e&&uni.navigateTo({url:"/pages/otherPages/musiclist/musiclist?id=".concat(a)})},changeHistory:function(t,n){var r=t.currentTarget.dataset.id,e=t.currentTarget.dataset.name,a=uni.getStorageSync("history")||[];a.map((function(t,n,e){t.id===r&&e.splice(n,1)})),a.unshift({id:r,name:e,tag:n}),uni.setStorageSync("history",a),this.setData({history:a})},deleteHistory:function(){this.setData({history:[]}),uni.setStorageSync("history",[])},handleSong:function(t){this.changeHistory(t,"song"),uni.navigateTo({url:"/pages/otherPages/player/player?id=".concat(t.currentTarget.dataset.id)})},handleArtist:function(t){this.changeHistory(t,"artist"),uni.navigateTo({url:"/pages/otherPages/album/album?id=".concat(t.currentTarget.dataset.id)})},handlePlaylist:function(t){this.changeHistory(t,"playlist"),uni.navigateTo({url:"/pages/otherPages/musiclist/musiclist?id=".concat(t.currentTarget.dataset.id)})}}};n.default=l},eaa8:function(t,n,r){"use strict";var e=r("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e(r("00ff")),i=function(t,n){return(0,a.default)({url:"/search",data:{keywords:t,type:n||1}})},o=function(t){return(0,a.default)({url:"/search/suggest",data:{keywords:t}})},s={data:function(){return{}},_getSearch:i,_getSearchSuggest:o};n.default=s}}]);